---
// Welcome to Astro! Everything between these triple-dash code fences
// is your "component frontmatter". It never runs in the browser.
console.log('This runs in your terminal, not the browser!');
import { Image } from 'astro:assets';
import '../styles/global.css';

import Seperator from '../components/Seperator.astro';
import Head from '../components/Head.astro';
import AsDithered from '../components/as-dithered/AsDithered.astro';

import ultraterm from '../assets/projects/ultraterm.png';
import jam56s from '../assets/projects/jam56s.png';
import rtwtui from '../assets/projects/rtwtui.png';
import splotch from '../assets/projects/splotch.png';
import beatbot from '../assets/projects/beatbot.png';
import Layout from '../layouts/Layout.astro';

import { getCollection } from 'astro:content';


import { date } from 'astro:schema';

import { execSync } from 'node:child_process';

let commitHash = 'unknown';
try {
  commitHash = execSync('git rev-parse HEAD').toString().trim().slice(0, 6);
} catch (e) {
  console.warn('Could not get git commit hash');
}

const projects = [
  {
    title: "ULTRATERM",
    date: "May-Jun 2025",
    description: "A portable bluetooth music player based on a settings terminal from ULTRAKILL",
    image: ultraterm,
    link: "https://github.com/jamdotjar/ULTRATERM"
  },
  {
    title: "Jam56s",
    date: "May 2025",
    description: "A custom 56-key column-staggered hotswap split keyboard",
    image: jam56s,
    link: "https://github.com/jamdotjar/jam56s"
  },

  {
    title: "rtw.tui",
    date: "Dec 2024",
    description: "A slightly crappy raytracer in rust with a terminal user interface. Built on top of my slightly crappy raytracing library",
    image: rtwtui,
    link: "https://github.com/jamdotjar/rtweekend-tui"
  },
    {
    title: "Splotch",
    date: "Jul 2025",
    description: "Scara PLOTter for CHeap, a tiny CNC drawing thingy hacked together over a weekend for Undercity, a hardware hackathon",
    image: splotch,
    link: "https://github.com/jamdotjar/splotch"
  },
      {title: "Beatbot",
    date: "Sept 2025",
    description: "A *very* short rhythm platformer made in Godot over a weekend",
    image: beatbot,
    link: "https://jamdotjar.itch.io/beatbot"
  },
  

];

const posts = await getCollection('blog');
const sortedPosts = posts.sort((a, b) => b.data.date.getTime() - a.data.date.getTime());



---
<Layout title="finnh.ca" description="My corner of the internet that `I rent for  $13.47/year ">
<html>
      <Head/>
  <body>
    <header class="menubar"> <a href="/" class="wave-text">finnh.ca</a> <nav style="display: flex; justify-content: right; gap: 50px;"><a href="#projects"><i class="hn hn-folder-solid"></i>Projects</a> <a href="#writing"><i class="hn hn-writing"></i>Writing</a></nav> </header>
    <main>
    <section class="hero block">
      <div class="hero-text">
      <h1><i>Hey, it's Finn</i></h1>
      <p>I'm a massive ▓▓▓▓ nerd from Canada and I make things for fun and financial ruin. Check out some of by projects below, read my ramblings, and if you want get in touch!</p>
      </div>
      <div class="hero-media"><Image class="hero-img" src={import('../assets/hero-dith.png')} alt="AAAAAA"/></div>
    </section>
    <Seperator value="13"/>
    <section class="projects block" id="projects">
      <aside>
        <h2>Projects</h2>
        <p>Here's what I've worked on recently, maybe some of it is interesting?</p>
      </aside>
        <ul class="project-grid"> 
          {projects.map((project) => (
            <li>
              <article onclick={`window.open('${project.link}', '_blank')`}>
                <div class="dithimg">
                  <Image src={project.image} alt={project.title} width={800}/>
                  <AsDithered src={project.image.src} alt={project.title}/>
                    <i class="cardlink hn hn-external-link" style=""></i>
                </div>
                <h2>
                  <p>{project.title}</p>
                  <p>{project.date}</p>
                </h2> 
                <p>{project.description}</p>
              </article>
            </li>
          ))}

          <li class="more-projects">
          <a href="https://github.com/jamdotjar">
          <article class="more-projects">
            <div class="more-projects-content">
              <i>more projects  </i><i class="hn hn-external-link"></i>
            </div>
          </article>
          </li>
        </a>
        </ul>
      
    </section>
    <Seperator value="35"/>
    <section class="writing block" id="writing">
      <div class = "section-header">
        <h2 >Writing</h2>
        <p><i>My filtered thoughts, hope I don't forget why I wrote them</i></p>
      </div>
      <div class="post-list">
        {sortedPosts.map((post) => (
        <div class="post-info"> 
            <a class="post-title" href={`/blog/${post.id}`}>{post.data.title}</a>
            <p class="post-blurb">{post.data.description || 'Read it and find out!'}</p>
            <p class="post-date">{post.data.date.toLocaleDateString()}</p>
            <div class="post-tags">
              {post.data.tags?.map((tag) => <a>[{tag}]</a>)}
              </div>
        </div>
      ))}
      </div>
    </section>
    <Seperator value="45"/>
    <div class="block" style="display: flex; align-self: stretch; border: 1px solid var(--color-border); margin: 0 75px;">
      <section class="contact">
      <div class="section-header" style="justify-content: flex-end; gap: 10px"><p>Want to yell at me? Here's how to get in</p><h2>Contact</h2></div>
      <div class="contact-links">
      <a href="mailto:hi@finnh.ca">[saying hi]</a>
      <a href="mailto:work@finnh.ca">[second email]</a>
      <a href="https://github.com/jamdotjar">[github]</a>
      <a href="https://hackclub.enterprise.slack.com/team/U066HP9DWPK">[slack]</a>
      </div>
      </section>
      <section class="lucky">
      under construction...
      </section>
    </div>
    <footer class="footer"> 
      <p>© Finn Hofbauer, 2025</p> <a href="https://github.com/jamdotjar/finnh.ca">commit {commitHash}, github</a>
    </footer>
    </main>
  </body>
</html>

<script>
  document.querySelectorAll('.wave-text').forEach(el => {
    const text = el.textContent;
    el.innerHTML = text.split('').map((char, i) => 
      `<span style="--char-index: ${i}">${char}</span>`
    ).join('');
  });
</script>

<style>
main {
  scroll-timeline: --main-timeline;
}

.cardlink {
  position: absolute;
  top: 10px;
  right: 10px;
  color: var(--color-surface);
  z-index: 0.5;
  text-shadow: -1px -1px 0 var(--color-text-muted), 1px -1px 0 var(--color-text-muted), -1px 1px 0 var(--color-text-muted), 1px 1px 0 var(--color-text-muted);
}

section.block {
  margin: 0 75px;
}
.footer {
  position: relative;
  display: flex;
  padding: 25px;
  justify-content: space-between;
  align-items: center;
  align-self: stretch;
  background-color: var(--color-text);
  color: var(--color-bg);
}

.lucky {
  width: 100%;
  display: flex;
  flex: 1;
  align-items: center;
  justify-content: center;
  font-family: var(--font-mono);
}
.contact-links {
  font-family: var(--font-mono);
  display: flex;
  align-items: center;
  align-content: center;
  gap: 13px 46px;
  align-self: stretch;
  flex-wrap: wrap;
}
.contact {
  display: flex;
  flex: 1;
  padding: 50px;
  flex-direction: column;
  align-items: flex-start;
  gap: 50px;
  border-right: 1px solid var(--color-border);
}

.writing {
  display: flex;
  border: 1px solid var(--color-border);
  padding: 50px;
  flex-direction: column;
  align-items: flex-start;
  gap: 50px;
  align-self: stretch;
  min-height: 300px;
}

.section-header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  align-self: stretch;
}

.post-list {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  align-self: stretch;
  gap: 15px;
  width: 100%;
}
.post-info {
  display: flex;
  gap: 50px;
  align-items: baseline;
  width: 100%;
  max-width: 800px;
  font-size: 1rem;
  opacity: 50%;
  transition: opacity 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);

}

.post-info:hover {
  opacity: 100%;
  
}
.post-title {
  color: var(--color-text);
  font-family: var(--font-title, sans-serif);
  font-style: normal;
  font-weight: 400;
  line-height: normal;
}
.post-blurb {
  font-family: var(--font-title, sans-serif);
  font-style: italic;
  font-weight: 200;
  color: var(--color-text-muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 50ch;
}

.post-date {
  color: rgba(39, 39, 42, 0.5);
  font-family: var(--font-mono, monospace);
}

.post-tags {
 gap: 5px;
  display: flex;
  flex-direction: row;
   align-self: stretch;
}

.post-tags a {
  color: var(--color-text-muted);
  font-family: var(--font-mono, monospace);
  font-style: normal;
  font-weight: 300;
 
  width: 100%;
 
  line-height: normal;
}

.writing-row-meta {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 2px;
  min-width: 200px;
}
.writing-tag {
  text-decoration: underline;
  text-underline-position: from-font;
  margin-right: 0.25em;
}

.projects {
  display: flex;
  flex-direction: row-reverse;
  align-items: center;
  align-self: stretch;
}

.projects aside{ 
  border: 1px solid var(--color-border);
  border-left: none;
  display: flex;
  padding: 50px;
  flex-direction: column;
  align-items: flex-start;
  gap: 50px;
  align-self: stretch;
  width: 300px;
  background-image: linear-gradient(rgba(255,255,255,0.9), rgba(255,255,255,0.9)), url('/grad-dith.png'); 
  background-size: 400%;
  background-position: 20% 50%;
  background-repeat: repeat-x;
  background-color: transparent;
} h2 {
  font-size: 2rem;
}

.project-grid {
  padding: 50px;
  border: 1px solid var(--color-border);
  list-style: none;
  margin: 0;

  row-gap: 50px;
  column-gap: 50px;
  width: 100%;
  
  display: grid;
  flex: 0 1 auto;
  align-items: stretch;
  justify-items: center;
  grid-template-columns: repeat(auto-fill, minmax(400px, 400px));
    justify-content: center;
  align-self: stretch;
}

@media (max-width: 900px) {
  .projects {
    flex-direction: column;
  }
  .projects aside {
    border-left: 1px solid var(--color-border);
    border-bottom: none;
    width: 100%;
    padding: 30px 20px;
    box-sizing: border-box;
    flex-direction: row;
    align-items: baseline;
  }
}

.project-grid article {
    box-sizing: border-box;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  width: 400px;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 10px;
  overflow: hidden;
  transition: all 0.8s cubic-bezier(0.5, 1, 0.89, 1);
  height: 100%;
  cursor:pointer;
}

.project-grid article:hover {
  box-shadow: 8px 8px 0px var(--color-border);
  transform: translate(-4px, -4px);
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.project-grid article:active {
  box-shadow: 4px 4px 0px var(--color-border);
  transform: translate(-2px, -2px);
  cursor:grabbing;
  
}

.project-grid article p {
  padding: 0 10px;
  padding-bottom: 10px;
  font-style: italic;
  
}
.project-grid article img {
  width: 100%;
  height: auto;
  display: block;
}
.project-grid article h2 {
  font-weight: 300;
  display: flex;
  justify-content: space-between;
  align-items: center;
  align-self: stretch;
  font-size: 1rem;
}

.project-grid article h2 > :first-child {
  font-weight: 400;
}

.dithimg {
  position: relative;
  width: 400px;
  overflow: hidden;
}

.dithimg img {
  display: block;
  width: 100%;
  height: auto;
}

.dithimg > :global(as-dithered-image) {
  position: absolute;
  inset: 0;
  z-index: 1;
  transition: opacity 0.5s;
}

.project-grid article:hover .dithimg > :global(as-dithered-image) {
  opacity: 0;
}

.more-projects {
  height: 100%;
  width: 100%;
  display: flex;
  align-self: stretch;
  min-height: 100px;
 
}

.more-projects-content {
  display: flex;
  justify-content: center;
  align-items: center;
  align-self: stretch;
  height: 100%;
  width: 100%;
  gap: 10px;
  background-image: linear-gradient(rgba(255,255,255,0.9), rgba(255,255,255,0.9)), url('/grad-dith.png'); 
  background-size: 800%;
  background-position: 32% 32%;
  background-repeat: no-repeat;
  background-color: transparent;
  margin-bottom: -10px;
  transition: background-position 0.2s ease-in-out;
  image-rendering: pixelated;
}
.more-projects-content:hover {
background-image: linear-gradient(rgba(255,255,255,0.95), rgba(255,255,255,0.95)), url('/grad-dith.png'); 
}
.hero {
  display: flex; 
  padding: 50px;
  justify-content: space-between;
  align-items: stretch;
  gap: auto;
  border: 1px solid var(--color-border);
  border-top: none;
  margin: 0;
}

.hero > * { flex: 1; }

.hero-text {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  min-height: 250px;
  font-size: 1.25rem;
}

.hero-media {
  position: relative;
  overflow: hidden;
}

.hero-img {
  position: absolute;
  inset: 0;
  height: 250px;
  object-fit: contain;
  display: block;
  image-rendering: pixelated;
  transition: transform 0.3s ease-in-out;
  margin: auto;
  left: 50%;
  transform: translateX(-50%);
}
.hero-media:hover .hero-img {
  transform: translateX(-50%) scale(1.05);
}

.hero-media:active .hero-img {
  transform: translateX(-50%) scale(1.02);
}


.menubar {
  position: sticky;
  display: flex;
  height: 75px;
  padding: 25px 75px;
  justify-content: space-between;
  align-items: center;
  align-self: stretch;
  border-bottom: 1px solid var(--color-border);
  background-color: var(--color-surface);
  backdrop-filter: blur(10px);
  text-align: center;
  z-index: 10;
  font-family: var(--font-title);
}
.menubar nav a {
  display: flex;
  align-items: center;
  gap: 8px;
  text-decoration: none;
  font-family: var(--font-title);
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

.menubar nav:has(a:hover) a:not(:hover) {
  color: var(--color-text-muted);
}

.menubar nav a:hover {
    text-shadow: 0 0 0.5px currentColor;
  color: #000;
}

.menubar nav i {
  display: inline-flex;
  
}


.wave-text {
  display: inline-flex;
  text-decoration: none;
}

:global(.wave-text span) {
  display: inline-block;
  font-weight: 400;
  transition: font-weight 0.1s ease;
}
.wave-text:hover {
  cursor: pointer;
}

:global(.wave-text:hover span) {
  animation: fontWave 2s ease-in-out infinite;
  animation-delay: calc(var(--char-index) * 0.08s);
}

@keyframes fontWave {
  0%, 50% {
    font-weight: 400;
  }
  25% {
    font-weight: 700;
  }
}

</style>
